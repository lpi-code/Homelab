# OpenWrt System Configuration Template
# Generated by Ansible for {{ router_hostname | default('openwrt-router') }}

config system
	option hostname '{{ router_hostname | default(inventory_hostname) }}'
	option timezone '{{ system_config.timezone | default("UTC") }}'
	option zonename '{{ system_config.zonename | default("US") }}'
	option conloglevel '8'
	option cronloglevel '8'
	option log_size '64'
	option urandom_seed '0'

{% if locale is defined %}
config timeserver 'ntp'
	list server '0.openwrt.pool.ntp.org'
	list server '1.openwrt.pool.ntp.org'
	list server '2.openwrt.pool.ntp.org'
	list server '3.openwrt.pool.ntp.org'
{% endif %}

{% if monitoring is defined and monitoring.enabled %}
config snmpd
{% if monitoring.snmp.enabled %}
	option agentaddress 'UDP:161'
	option syslocation '{{ monitoring.snmp.location | default("Homelab") }}'
	option syscontact '{{ monitoring.snmp.contact | default("admin@homelab.local") }}'
	option rocommunity '{{ monitoring.snmp.community | default("public") }}'
{% else %}
	option enabled '0'
{% endif %}
{% endif %}

